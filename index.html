<!DOCTYPE html>
<html lang="ur">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAMING HUB | ULTIMATE OVERRIDE</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    
    <style>
        :root { 
            --primary: #00f2ff; --secondary: #7000ff; --accent: #ff00c1;
            --bg: #010409; --glass: rgba(10, 15, 28, 0.9); 
            --danger: #ff003c; --success: #00ff88;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Rajdhani', sans-serif; }
        body { background: var(--bg); color: #fff; min-height: 100vh; overflow-x: hidden; }

        /* Background Video */
        .video-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; object-fit: cover; opacity: 0.35; filter: hue-rotate(45deg); }

        /* Heavy Loader */
        #main-loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 10000;
        }
        .scanner { width: 280px; height: 4px; background: var(--primary); box-shadow: 0 0 25px var(--primary); animation: scan 2s cubic-bezier(0.4, 0, 0.2, 1) infinite; }
        @keyframes scan { 0%, 100% { transform: translateY(-60px); opacity: 0.5; } 50% { transform: translateY(60px); opacity: 1; } }

        /* Navbar */
        .navbar {
            position: fixed; top: 0; width: 100%; padding: 15px 30px;
            background: var(--glass); backdrop-filter: blur(20px);
            border-bottom: 2px solid var(--primary); display: flex;
            justify-content: space-between; align-items: center; z-index: 5000;
            box-shadow: 0 0 20px rgba(0, 242, 255, 0.2);
        }

        .container { max-width: 500px; margin: 120px auto 40px; padding: 20px; position: relative; }
        .glass-card { 
            background: var(--glass); border: 1px solid rgba(0, 242, 255, 0.2); 
            padding: 30px; border-radius: 25px; backdrop-filter: blur(20px);
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }

        /* Heavy Buttons */
        .btn-heavy {
            background: linear-gradient(45deg, var(--secondary), var(--primary));
            border: none; color: white; padding: 16px; border-radius: 12px;
            font-family: 'Orbitron'; font-weight: 900; cursor: pointer;
            text-transform: uppercase; transition: 0.4s; width: 100%; margin-top: 15px;
            box-shadow: 0 0 20px rgba(112, 0, 255, 0.4);
            letter-spacing: 1px;
        }
        .btn-heavy:hover { transform: scale(1.03); box-shadow: 0 0 35px var(--primary); filter: brightness(1.2); }

        /* Tool Cards */
        .tool-card {
            background: rgba(255,255,255,0.02); border: 1px solid rgba(0, 242, 255, 0.1);
            padding: 20px; border-radius: 20px; margin-bottom: 20px;
            display: flex; align-items: center; gap: 20px; transition: 0.3s ease;
        }
        .tool-card:hover { border-color: var(--primary); background: rgba(0, 242, 255, 0.05); transform: translateX(10px); }
        .tool-img { width: 75px; height: 75px; border-radius: 15px; border: 2px solid var(--primary); object-fit: cover; }

        input { width: 100%; padding: 15px; background: rgba(0,0,0,0.6); border: 1px solid var(--primary); color: #fff; margin-bottom: 15px; border-radius: 10px; outline: none; transition: 0.3s; }
        input:focus { box-shadow: 0 0 15px var(--primary); }

        .hidden { display: none !important; }
        .wa-float { position: fixed; bottom: 25px; right: 25px; width: 65px; height: 65px; background: #25d366; border-radius: 50%; display: flex; align-items: center; justify-content: center; z-index: 9000; box-shadow: 0 0 25px #25d366; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
    </style>
</head>
<body>

    <video autoplay muted loop class="video-bg">
        <source src="https://assets.mixkit.co/videos/preview/mixkit-digital-animation-of-blue-and-purple-neon-lines-34407-large.mp4" type="video/mp4">
    </video>

    <div id="main-loader">
        <h1 style="font-family:'Orbitron'; color:var(--primary); margin-bottom:30px; letter-spacing: 5px;">SYSTEM BOOTING</h1>
        <div class="scanner"></div>
    </div>

    <a href="#" id="wa-floating-btn" class="wa-float hidden" target="_blank">
        <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" width="35">
    </a>

    <div id="user-menu" class="navbar hidden">
        <div style="font-family:'Orbitron'; color:var(--primary); font-weight:900; font-size: 22px;">GAMING HUB <span style="color:white;">ULTIMATE</span></div>
        <div style="position:relative;">
            <img id="top-profile-pic" onclick="document.getElementById('drop').classList.toggle('hidden')" style="width:50px; height:50px; border-radius:12px; border:2px solid var(--primary); cursor:pointer; object-fit: cover;">
            <div id="drop" class="hidden" style="position:absolute; top:70px; right:0; background:var(--glass); border:1px solid var(--primary); padding:15px; border-radius:15px; width:220px; box-shadow: 0 10px 30px #000;">
                <button onclick="tab('tools')" style="width:100%; background:none; color:white; border:none; padding:12px; text-align:left; cursor:pointer; font-weight: bold;">üìÇ DASHBOARD</button>
                <button onclick="tab('profile')" style="width:100%; background:none; color:white; border:none; padding:12px; text-align:left; cursor:pointer; font-weight: bold;">üë§ MY PROFILE</button>
                <button id="admin-entry-btn" class="hidden" onclick="showAdminPanel()" style="width:100%; background:none; color:var(--danger); border:none; padding:12px; text-align:left; cursor:pointer; font-weight: bold;">‚öôÔ∏è ADMIN PANEL</button>
                <hr style="opacity:0.1; margin: 10px 0;">
                <button onclick="logout()" style="width:100%; background:none; color:#ff4757; border:none; padding:12px; text-align:left; cursor:pointer; font-weight: bold;">üö™ DISCONNECT</button>
            </div>
        </div>
    </div>

    <div id="screen-login" class="container">
        <div class="glass-card" style="text-align:center;">
            <h1 style="font-family:'Orbitron'; color:var(--primary); margin-bottom:25px; text-shadow: 0 0 15px var(--primary);">ACCESS PORTAL</h1>
            <button class="btn-heavy" onclick="login('google')" style="background:white; color:black; margin-bottom: 20px;">SIGN IN WITH GOOGLE</button>
            <div style="margin-bottom: 20px; opacity: 0.5;">OR USE PROTOCOL</div>
            <input type="email" id="email-input" placeholder="CORE EMAIL">
            <input type="password" id="pass-input" placeholder="ENCRYPTION KEY">
            <button class="btn-heavy" onclick="emailAuth('login')">INITIALIZE SESSION</button>
            <p style="margin-top:20px; font-size:14px; color:var(--accent); cursor:pointer;" onclick="emailAuth('signup')">REQUEST NEW ACCESS ID</p>
        </div>
    </div>

    <div id="screen-verify" class="container hidden">
        <div class="glass-card" style="text-align:center; border-color:var(--accent);">
            <h2 style="font-family:'Orbitron'; color:var(--accent); margin-bottom: 20px;">SECURITY CHECK</h2>
            <p style="margin-bottom: 20px;">Follow steps to bypass firewall.</p>
            <a href="#" id="s1_link" class="btn-heavy" target="_blank" onclick="markStep()">1. FOLLOW TIKTOK</a>
            <a href="#" id="s2_link" class="btn-heavy" target="_blank" onclick="markStep()">2. SUBSCRIBE YOUTUBE</a>
            <a href="#" id="s3_link" class="btn-heavy" target="_blank" onclick="markStep()">3. JOIN WHATSAPP</a>
            <button id="unlock-btn" class="btn-heavy hidden" style="background:var(--success); color:black;" onclick="startTimer()">VERIFY COMPLETION</button>
            <div id="timer-box" class="hidden" style="margin-top:20px; color:gold; font-weight: bold; font-size: 18px;">DECRYPTING: <span id="sec">15</span>s</div>
        </div>
    </div>

    <div id="screen-content" class="container hidden">
        <div id="tab-tools-view">
            <h2 style="font-family:'Orbitron'; margin-bottom:20px; color:var(--primary);">CORE TOOLS</h2>
            <input type="text" id="tool-search" placeholder="üîç SEARCH DATABASE..." onkeyup="filterTools()">
            <div id="tools-list"></div>
        </div>
        <div id="tab-profile-view" class="hidden">
            <div class="glass-card" style="text-align:center;">
                <img id="profile-pic" src="" style="width:120px; height: 120px; border-radius:50%; border:4px solid var(--primary); margin-bottom: 20px;">
                <h2 id="profile-name-view" style="margin-bottom: 20px;"></h2>
                <input type="text" id="edit-name" placeholder="NEW IDENTITY ALIAS">
                <button class="btn-heavy" onclick="updateProfile()">UPDATE IDENTITY</button>
            </div>
        </div>
    </div>

    <div id="screen-admin" class="container hidden">
        <div class="glass-card" style="border-color:var(--danger);">
            <h2 style="font-family:'Orbitron'; color:var(--danger); text-align:center; margin-bottom: 20px;">ADMIN COMMANDS</h2>
            <p style="margin-bottom: 10px;">Connected Users: <span id="user-count" style="color:var(--primary);">0</span></p>
            <div id="admin-user-list" style="max-height:150px; overflow-y:auto; margin:15px 0; border:1px solid #333; padding:10px; background: rgba(0,0,0,0.5);"></div>
            
            <h4 style="margin-bottom: 10px; color: var(--primary);">UPLOAD NEW TOOL</h4>
            <input type="text" id="t_name" placeholder="TOOL NAME">
            <input type="text" id="t_url" placeholder="DOWNLOAD LINK">
            <input type="text" id="t_tutorial" placeholder="VIDEO TUTORIAL LINK">
            <input type="text" id="t_pic" placeholder="ICON IMAGE URL">
            <button class="btn-heavy" onclick="addTool()">DEEP UPLOAD</button>
            
            <hr style="margin:25px 0; opacity:0.1;">
            <button class="btn-heavy" style="background:#333;" onclick="show('screen-content')">BACK TO DASHBOARD</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut, GoogleAuthProvider, GithubAuthProvider, signInWithPopup, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, collection, onSnapshot, query, orderBy, addDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // üî• FIREBASE CONFIG INTEGRATED üî•
        const firebaseConfig = {
          apiKey: "AIzaSyA8eAIxj8kLzf1DuESe48rNF3_hR7_oorc",
          authDomain: "games-451a2.firebaseapp.com",
          projectId: "games-451a2",
          storageBucket: "games-451a2.firebasestorage.app",
          messagingSenderId: "825960346996",
          appId: "1:825960346996:web:8154949791d664e1ab2821"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        let currentAdmin = "Saabj5614@gmail.com"; 
        let stepsCount = 0;
        let allTools = [];

        onAuthStateChanged(auth, async (user) => {
            if(user) {
                const userRef = doc(db, "users", user.uid);
                let snap = await getDoc(userRef);
                if(!snap.exists()) await setDoc(userRef, { name: user.displayName || "Elite Gamer", email: user.email, photo: user.photoURL || "", isVerified: false, status: 'active' });
                
                const ud = (await getDoc(userRef)).data();
                if(ud.status === 'blocked') { alert("ACCESS DENIED: ACCOUNT TERMINATED"); signOut(auth); return; }

                document.getElementById('top-profile-pic').src = ud.photo || "https://via.placeholder.com/100";
                document.getElementById('profile-pic').src = ud.photo || "https://via.placeholder.com/100";
                document.getElementById('profile-name-view').innerText = ud.name;
                document.getElementById('user-menu').classList.remove('hidden');

                if(user.email?.toLowerCase() === currentAdmin.toLowerCase()) document.getElementById('admin-entry-btn').classList.remove('hidden');

                if(ud.isVerified || user.email?.toLowerCase() === currentAdmin.toLowerCase()) { show('screen-content'); loadTools(); }
                else { show('screen-verify'); loadVerifyLinks(); }
                loadGlobalConfig();
            } else { 
                show('screen-login'); 
                document.getElementById('user-menu').classList.add('hidden'); 
            }
        });

        window.login = (p) => signInWithPopup(auth, p === 'google' ? new GoogleAuthProvider() : new GithubAuthProvider());
        window.emailAuth = (type) => {
            const e = document.getElementById('email-input').value, p = document.getElementById('pass-input').value;
            if(type === 'signup') createUserWithEmailAndPassword(auth, e, p).catch(err => alert(err.message));
            else signInWithEmailAndPassword(auth, e, p).catch(err => alert(err.message));
        };
        window.logout = () => signOut(auth);
        window.show = (id) => { 
            document.querySelectorAll('#screen-login, #screen-verify, #screen-content, #screen-admin').forEach(c=>c.classList.add('hidden')); 
            document.getElementById(id).classList.remove('hidden'); 
        };
        window.tab = (t) => { 
            show('screen-content'); 
            document.getElementById('tab-tools-view').classList.toggle('hidden', t !== 'tools'); 
            document.getElementById('tab-profile-view').classList.toggle('hidden', t !== 'profile'); 
            document.getElementById('drop').classList.add('hidden'); 
        };

        window.markStep = () => { stepsCount++; if(stepsCount >= 3) document.getElementById('unlock-btn').classList.remove('hidden'); };
        window.startTimer = () => {
            document.getElementById('timer-box').classList.remove('hidden');
            let t = 15;
            let itv = setInterval(async () => {
                t--; document.getElementById('sec').innerText = t;
                if(t <= 0) { clearInterval(itv); await updateDoc(doc(db, "users", auth.currentUser.uid), { isVerified: true }); location.reload(); }
            }, 1000);
        };

        window.loadTools = () => {
            onSnapshot(query(collection(db, "tools"), orderBy("time", "desc")), (s) => {
                allTools = s.docs.map(d => ({id: d.id, ...d.data()}));
                renderTools(allTools);
            });
        };

        function renderTools(ts) {
            const isAdmin = auth.currentUser.email.toLowerCase() === currentAdmin.toLowerCase();
            document.getElementById('tools-list').innerHTML = ts.map(t => `
                <div class="tool-card">
                    <img src="${t.pic || 'https://via.placeholder.com/80'}" class="tool-img">
                    <div style="flex:1;">
                        <b style="color:var(--primary); font-size: 18px;">${t.name}</b><br>
                        <div style="margin-top:10px;">
                            <a href="${t.url}" target="_blank" style="color:var(--success); text-decoration:none; font-weight:bold; margin-right:15px;">DOWNLOAD</a>
                            <a href="${t.tutorial}" target="_blank" style="color:var(--secondary); text-decoration:none; font-weight:bold;">TUTORIAL</a>
                            ${isAdmin ? `<button onclick="deleteTool('${t.id}')" style="background:var(--danger); color:white; border:none; padding:5px 10px; border-radius:5px; float:right; cursor:pointer;">DEL</button>` : ''}
                        </div>
                    </div>
                </div>`).join('');
        }

        window.deleteTool = async (id) => { if(confirm("PERMANENTLY DELETE TOOL?")) await deleteDoc(doc(db, "tools", id)); };

        window.addTool = async () => {
            const n = document.getElementById('t_name').value, u = document.getElementById('t_url').value, t = document.getElementById('t_tutorial').value, p = document.getElementById('t_pic').value;
            if(n && u) { 
                await addDoc(collection(db, "tools"), { name: n, url: u, tutorial: t, pic: p, time: Date.now() }); 
                alert("TOOL DEPLOYED SUCCESSFULLY"); 
                document.getElementById('t_name').value = '';
            }
        };

        window.showAdminPanel = () => { 
            show('screen-admin'); 
            onSnapshot(collection(db, "users"), (snap) => {
                document.getElementById('user-count').innerText = snap.size;
                document.getElementById('admin-user-list').innerHTML = snap.docs.map(d => `
                    <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
                        <span>${d.data().email}</span>
                        <button onclick="toggleBlock('${d.id}', '${d.data().status}')" style="background:${d.data().status==='blocked'?'green':'red'}; color:white; border:none; cursor:pointer; padding:2px 5px;">${d.data().status==='blocked'?'Unblock':'Block'}</button>
                    </div>`).join('');
            });
        };

        window.toggleBlock = async (uid, s) => await updateDoc(doc(db, "users", uid), { status: s === 'blocked' ? 'active' : 'blocked' });

        async function loadGlobalConfig() {
            const snap = await getDoc(doc(db, "config", "main"));
            if(snap.exists() && snap.data().wa_num) {
                document.getElementById('wa-floating-btn').href = `https://wa.me/${snap.data().wa_num}`;
                document.getElementById('wa-floating-btn').classList.remove('hidden');
            }
        }

        async function loadVerifyLinks() {
            const snap = await getDoc(doc(db, "config", "main"));
            if(snap.exists()) {
                const d = snap.data();
                document.getElementById('s1_link').href = d.tk || "#";
                document.getElementById('s2_link').href = d.yt || "#";
                document.getElementById('s3_link').href = d.wa_channel || "#";
            }
        }

        window.filterTools = () => {
            const term = document.getElementById('tool-search').value.toLowerCase();
            renderTools(allTools.filter(t => t.name.toLowerCase().includes(term)));
        };

        window.updateProfile = async () => {
            const n = document.getElementById('edit-name').value;
            if(n) { await updateDoc(doc(db, "users", auth.currentUser.uid), { name: n }); alert("IDENTITY UPDATED"); }
        };

        // Initialize Loader
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('main-loader').style.transition = '0.5s';
                document.getElementById('main-loader').style.opacity = '0';
                setTimeout(() => document.getElementById('main-loader').style.display = 'none', 500);
            }, 2500);
        });
    </script>
</body>
</html>
